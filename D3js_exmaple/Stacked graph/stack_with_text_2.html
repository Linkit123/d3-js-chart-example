<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <link rel="stylesheet" href="">
  <style>
body {
  font: 10px sans-serif;
  /*opacity: 0.7;*/
}

.y.axisLeft text {
    /*fill: steelblue;*/
   opacity: 0.5;
}

.axis path,
.axis line {
  fill: none;
  stroke: #09080880;
  shape-rendering: crispEdges;
  opacity: 0.3;
}

.bar1 {
  fill: #93b6ff;
  opacity: 0.85;
}

.bar2 {
  /*fill: #ffb1b9;*/
  /*padding-right: 20px;*/
  opacity: 0.8;
}

.x.axis path {
  display: none;
  opacity: 0.3;
}
svg text {
            /*fill: yellow;*/
            font: 15px sans-serif;
            /*text-anchor: end;*/
         }
.text_title{
  font-size: 20px;
}
</style>
</head>
<body>
  <svg height="50" width=100%>
  <text class="text_title" transform="143,300" x="900" y="29" dx=".05em">総運行時間</text>
</svg>
  <svg id="chart1">
    <rect id="rect1" fill="#ffcccc" x="143" y="134" width="41" height="326"></rect>
   <text transform="rotate(90)" rotate="-90" dx="1.05em" y="-156" x="235"> A &nbsp;&nbsp; I&nbsp;&nbsp; 運  &nbsp; 行</text>

  <rect id="rect_title_1" fill="#4472c4" x="543" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="487" y="30" dx=".05em">1号車</text>
  
  <rect id="rect_title_1" fill="#6dab44" x="643" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="587" y="30" dx=".05em">2号車</text>
  
  <rect id="rect_title_1" fill="#ed7d31" x="443" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="687" y="30" dx=".05em">3号車</text>
  
  <rect id="rect_title_1" fill="#c0504d" x="743" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="787" y="30" dx=".05em">4号車</text>
  
  <rect id="rect_title_1" fill="#00b0f0" x="843" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="887" y="30" dx=".05em">5号車</text>
  
  <rect id="rect_title_1" fill="#8064a2" x="943" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="987" y="30" dx=".05em">6号車</text>
  
  <rect id="rect_title_1" fill="#d3cf27" x="1043" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="1087" y="30" dx=".05em">7号車</text>
  
  <rect id="rect_title_1" fill="#7f7f7f" x="1143" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="1187" y="30" dx=".05em">8号車</text>
  
  <rect id="rect_title_1" fill="#f70cdc" x="1243" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="1287" y="30" dx=".05em">9号車</text>
  
  <rect id="rect_title_1" fill="#28d677" x="1343" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="1387" y="30" dx=".05em">10号車</text>
  </svg>
  <svg id="chart2">
    <rect id="rect2" fill="#ffcccc" x="143" y="134" width="41" height="326"></rect>
   <!-- <rect id="rect_title_1" fill="#ffb1b9" x="643" y="10" width="38" height="15"></rect>
   <rect id="rect_title_2" fill="#93b6ff" x="543" y="10" width="38" height="15"></rect> -->
   <text transform="rotate(90)" rotate="-90" dx="1.05em" y="-156" x="235">定 &nbsp;&nbsp; 期&nbsp;&nbsp; 運  &nbsp; 行</text>
  
  <rect id="rect_title_1" fill="#4472c4" x="543" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="487" y="30" dx=".05em">1号車</text>
  
  <rect id="rect_title_1" fill="#6dab44" x="643" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="587" y="30" dx=".05em">2号車</text>
  
  <rect id="rect_title_1" fill="#ed7d31" x="443" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="687" y="30" dx=".05em">3号車</text>
  
  <rect id="rect_title_1" fill="#c0504d" x="743" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="787" y="30" dx=".05em">4号車</text>
  
  <rect id="rect_title_1" fill="#00b0f0" x="843" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="887" y="30" dx=".05em">5号車</text>
  
  <rect id="rect_title_1" fill="#8064a2" x="943" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="987" y="30" dx=".05em">6号車</text>
  
  <rect id="rect_title_1" fill="#d3cf27" x="1043" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="1087" y="30" dx=".05em">7号車</text>
  
  <rect id="rect_title_1" fill="#7f7f7f" x="1143" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="1187" y="30" dx=".05em">8号車</text>
  
  <rect id="rect_title_1" fill="#f70cdc" x="1243" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="1287" y="30" dx=".05em">9号車</text>
  
  <rect id="rect_title_1" fill="#28d677" x="1343" y="15" width="38" height="15"></rect>
  <text transform="143,300" x="1387" y="30" dx=".05em">10号車</text>
  </svg>
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script>
//================================= get data from graph controller ========================
var data1=[
  {"hour":"1:00","bar1":58,"bar2":35,"bar3":60,"bar4":31,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"2:00","bar1":40,"bar2":25,"bar3":12,"bar4":23,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"3:00","bar1":10,"bar2":15,"bar3":40,"bar4":34,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"4:00","bar1":25,"bar2":50,"bar3":36,"bar4":30,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"5:00","bar1":34,"bar2":23,"bar3":35,"bar4":2,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"6:00","bar1":42,"bar2":9,"bar3":19,"bar4":12,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"7:00","bar1":10,"bar2":5,"bar3":26,"bar4":32,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"8:00","bar1":0,"bar2":15,"bar3":15,"bar4":28,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"9:00","bar1":12,"bar2":5,"bar3":24,"bar4":13,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"10:00","bar1":23,"bar2":42,"bar3":25,"bar4":45,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"11:00","bar1":15,"bar2":25,"bar3":42,"bar4":24,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"12:00","bar1":18,"bar2":35,"bar3":12,"bar4":45,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"13:00","bar1":33,"bar2":20,"bar3":0,"bar4":36,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"14:00","bar1":19,"bar2":25,"bar3":6,"bar4":25,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"15:00","bar1":50,"bar2":25,"bar3":14,"bar4":18,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"16:00","bar1":9,"bar2":26,"bar3":12,"bar4":29,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"17:00","bar1":18,"bar2":30,"bar3":35,"bar4":14,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"18:00","bar1":23,"bar2":23,"bar3":18,"bar4":41,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"19:00","bar1":15,"bar2":17,"bar3":27,"bar4":21,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"20:00","bar1":11,"bar2":5,"bar3":21,"bar4":32,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"21:00","bar1":10,"bar2":0,"bar3":5,"bar4":50,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"22:00","bar1":6,"bar2":20,"bar3":50,"bar4":5,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"23:00","bar1":8,"bar2":23,"bar3":40,"bar4":30,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15}
  ];

var data2=[
  {"hour":"1:00","bar1":28,"bar2":25,"bar3":60,"bar4":31,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"2:00","bar1":20,"bar2":10,"bar3":12,"bar4":23,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"3:00","bar1":30,"bar2":35,"bar3":40,"bar4":34,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"4:00","bar1":55,"bar2":20,"bar3":36,"bar4":30,"bar5":7,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"5:00","bar1":14,"bar2":32,"bar3":35,"bar4":2,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"6:00","bar1":23,"bar2":12,"bar3":19,"bar4":12,"bar5":5,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"7:00","bar1":25,"bar2":41,"bar3":26,"bar4":32,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"8:00","bar1":12,"bar2":24,"bar3":15,"bar4":28,"bar5":8,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"9:00","bar1":0,"bar2":12,"bar3":24,"bar4":13,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"10:00","bar1":42,"bar2":13,"bar3":25,"bar4":45,"bar5":9,"bar6":0,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"11:00","bar1":0,"bar2":23,"bar3":42,"bar4":24,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"12:00","bar1":35,"bar2":17,"bar3":12,"bar4":45,"bar5":20,"bar6":8,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"13:00","bar1":20,"bar2":31,"bar3":0,"bar4":36,"bar5":6,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"14:00","bar1":18,"bar2":23,"bar3":6,"bar4":25,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"15:00","bar1":17,"bar2":10,"bar3":14,"bar4":18,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"16:00","bar1":14,"bar2":0,"bar3":12,"bar4":29,"bar5":20,"bar6":7,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"17:00","bar1":23,"bar2":3,"bar3":35,"bar4":14,"bar5":20,"bar6":10,"bar7":9,"bar8":5,"bar9":34,"bar10":15},
  {"hour":"18:00","bar1":24,"bar2":41,"bar3":18,"bar4":41,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"19:00","bar1":53,"bar2":41,"bar3":27,"bar4":21,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"20:00","bar1":10,"bar2":4,"bar3":21,"bar4":32,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"21:00","bar1":23,"bar2":2,"bar3":5,"bar4":50,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"22:00","bar1":26,"bar2":20,"bar3":50,"bar4":5,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15},
  {"hour":"23:00","bar1":15,"bar2":23,"bar3":40,"bar4":30,"bar5":20,"bar6":10,"bar7":9,"bar8":23,"bar9":34,"bar10":15}
  ];
var aiList = [
  {
  "hour":"1:00",
  "dataList":[
    {"id":"bar1","value":15},{"id":"bar2","value":10},{"id":"bar3","value":12},{"id":"bar4","value":6},{"id":"bar5","value":21},{"id":"bar6","value":23},{"id":"bar7","value":11},{"id":"bar8","value":0},{"id":"bar9","value":4},{"id":"bar10","value":31},
  ]},
  {
  "hour":"2:00",
  "dataList":[
    {"id":"bar1","value":23},{"id":"bar2","value":31},{"id":"bar3","value":12},{"id":"bar4","value":15},{"id":"bar5","value":11},{"id":"bar6","value":10},{"id":"bar7","value":21},{"id":"bar8","value":20},{"id":"bar9","value":12},{"id":"bar10","value":15},
  ]},
  {
  "hour":"3:00",
  "dataList":[
    {"id":"bar1","value":10},{"id":"bar2","value":20},{"id":"bar3","value":25},{"id":"bar4","value":15},{"id":"bar5","value":17},{"id":"bar6","value":9},{"id":"bar7","value":11},{"id":"bar8","value":23},{"id":"bar9","value":26},{"id":"bar10","value":7}
  ]},
  {
  "hour":"4:00",
  "dataList":[
    {"id":"bar1","value":9},{"id":"bar2","value":12},{"id":"bar3","value":15},{"id":"bar4","value":23},{"id":"bar5","value":14},{"id":"bar6","value":13},{"id":"bar7","value":23},{"id":"bar8","value":26},{"id":"bar9","value":24},{"id":"bar10","value":10}
  ]},
  {
  "hour":"5:00",
  "dataList":[
    {"id":"bar1","value":10},{"id":"bar2","value":21},{"id":"bar3","value":45},{"id":"bar4","value":32},{"id":"bar5","value":16},{"id":"bar6","value":7},{"id":"bar7","value":21},{"id":"bar8","value":23},{"id":"bar9","value":8},{"id":"bar10","value":12}
  ]},
  {
  "hour":"6:00",
  "dataList":[
    {"id":"bar1","value":25},{"id":"bar2","value":20},{"id":"bar3","value":15},{"id":"bar4","value":15},{"id":"bar5","value":15},{"id":"bar6","value":15},{"id":"bar7","value":15},{"id":"bar8","value":15},{"id":"bar9","value":15},{"id":"bar10","value":15}
  ]},
  {
  "hour":"7:00",
  "dataList":[
    {"id":"bar1","value":10},{"id":"bar2","value":21},{"id":"bar3","value":32},{"id":"bar4","value":23},{"id":"bar5","value":14},{"id":"bar6","value":16},{"id":"bar7","value":19},{"id":"bar8","value":20},{"id":"bar9","value":21},{"id":"bar10","value":22}
  ]},
  {
  "hour":"8:00",
  "dataList":[
    {"id":"bar1","value":7},{"id":"bar2","value":9},{"id":"bar3","value":7},{"id":"bar4","value":13},{"id":"bar5","value":12},{"id":"bar6","value":15},{"id":"bar7","value":14},{"id":"bar8","value":24},{"id":"bar9","value":22},{"id":"bar10","value":16}
  ]},
];

// for (var i = 0; i < aiList[0].dataList.length; i++) {
//    xData1.push(aiList[1].dataList[i].id);   
// }
// var aiList = [
//   {"time":"1:00","dataList":[
//                   {"routineSavId":1,"totalTravelTime":25},
//                   {"routineSavId":2,"totalTravelTime":62}]
//   },{"time":"2:00","dataList":[
//                   {"routineSavId":1,"totalTravelTime":45},
//                   {"routineSavId":2,"totalTravelTime":48}]
//     }
// ];

// var data = [
// {
//   time: "",
//   1: 25,
//   2: 62
// }
// ];
// console.log(aiList);
var margin = {top: 80, right: 80, bottom: 80, left: 80},
    width = 800 - margin.left - margin.right,
    height = 600 - margin.top - margin.bottom;
var paddingSgv = 250;
// var xdata=["dataList[0]",]
var xData = ["bar1", "bar2","bar3","bar4","bar5","bar6","bar7","bar8","bar9","bar10"];

var x = d3.scale.ordinal()
    .rangeRoundBands([0, width*2], .1);

var y0 = d3.scale.linear().domain([300, 1100]).range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .ticks(9)
    .orient("bottom")
    .innerTickSize(-height)

// create left yAxis
var yAxisLeft = d3.svg.axis().scale(y0).ticks(7).orient("left")
  .innerTickSize(-width*2)
// var color = d3.scale.
//     .category(['#ed7d31','#4472c4','#70ad47','#c0504d']);
function colores_google(n) {
  var colores_g = ['#ed7d31','#4472c4','#70ad47','#c0504d','#00b0f0','#8064a2','#d3cf27','#7f7f7f','#f70cdc','#28d677'];
  return colores_g[n % colores_g.length];
}
// ==================================  Chart 1================================
//add tag svg(width, height,) then add tag g(class, tranform--position of g)
    var svg = d3.select("body")
        .select("#chart1")
        .attr("width", "100%")
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("class", "graph")
        .attr("transform", "translate(" + paddingSgv + "," + margin.top + ")");
//get xData
// console.log(aiList[1].dataList[0].id);
var xData1=[];
for (var i = 0; i < aiList[0].dataList.length; i++) {
   xData1.push(aiList[1].dataList[i].id);   
}
// console.log(xData1);
//map data
var dataIntermediate = aiList.map(
  function (c) {
        return aiList.map(
          function (d,i) {
            console.log(i);
            return {x: d.hour, y: d.dataList[i].value};
        });
  });
console.log(dataIntermediate);
var dataStackLayout = d3.layout.stack()(dataIntermediate);
// console.log(dataStackLayout);
    // add data for x,y axist
      x.domain(dataStackLayout[0].map(function(d) {
        return d.x; 
      }));
      y0.domain([0, d3.max(dataStackLayout[dataStackLayout.length - 1], function(d) { 
       return d.y0 + d.y; 
       // return 300;
     })]);

    // add tag g, then call xAxis
      svg.append("g")
          .attr("class", "x axis")
          .attr("transform", "translate(0," + height + ")")
          .style('opacity', '0.5')
          .call(xAxis);

    // // add tag g, then call yAxisLeft
      svg.append("g")
        .attr("class", "y axis axisLeft")
        .attr("transform", "translate(0,0)")
        .call(yAxisLeft);
    // 
// var color1 = d3.scale.category20();
var layer = svg.selectAll(".stack")
            .data(dataStackLayout)
            .enter().append("g")
            .attr("class", "stack")
            .attr("fill", function(d,i) { return colores_google(i); } );

    layer.selectAll("rect")
            .data(function (d) {
              // console.log(d);
                return d;
            })
            .enter().append("rect")
            .attr("class", "bar2")
            .attr("x", function (d) {
                return x(d.x)+10;
            })
            .attr("y", function (d) {
                return y0(d.y + d.y0);
            })
            .attr("height", function (d) {
                return y0(d.y0) - y0(d.y + d.y0);
            })
            .attr("width", x.rangeBand()-20)
            .on("mouseover", function() { tooltip.style("display", null); })
  .on("mouseout", function() { tooltip.style("display", "none"); })
  .on("mousemove", function(d) {
    var xPosition = d3.mouse(this)[0] - 15;
    var yPosition = d3.mouse(this)[1] - 25;
    tooltip.attr("transform", "translate(" + xPosition + "," + yPosition + ")");
    tooltip.select("text").text(d.y);
  });

// Prep the tooltip bits, initial display is hidden
/*========== init tool tip=============*/
var tooltip = svg.append("g")
    .attr("class", "tooltip")
    .style("display", "none");
createToolTip(tooltip,svg);
  
// ==================================  Chart 2================================
//add tag svg(width, height,) then add tag g(class, tranform--position of g)
    var svg1 = d3.select("body")
        .select("#chart2")
        .attr("width", "100%")
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("class", "graph")
        .attr("transform", "translate(" + paddingSgv + "," + margin.top + ")");
// 
var dataIntermediate1 = xData.map(function (c) {
        return data2.map(function (d) {
            return {x: d.hour, y: d[c]};
        });
    });
var dataStackLayout1 = d3.layout.stack()(dataIntermediate1);
    // add data for x,y axist
      x.domain(dataStackLayout1[0].map(function(d) {
        return d.x; 
      }));
      y0.domain([0, d3.max(dataStackLayout1[dataStackLayout1.length - 1], function(d) {
       // return d.y0 + d.y+70;
       return 300; 
     })])

    // add tag g, then call xAxis
      svg1.append("g")
          .attr("class", "x axis")
          .attr("transform", "translate(0," + height + ")")
          .style('opacity', '0.5')
          .call(xAxis);

    // // add tag g, then call yAxisLeft
      svg1.append("g")
        .attr("class", "y axis axisLeft")
        .attr("transform", "translate(0,0)")
        .call(yAxisLeft);
    // 
// var color1 = d3.scale.category20();
var layer = svg1.selectAll(".stack")
            .data(dataStackLayout1)
            .enter().append("g")
            .attr("class", "stack")
            .attr("fill", function(d,i) { return colores_google(i); } );

    layer.selectAll("rect")
            .data(function (d) {
                return d;
            })
            .enter().append("rect")
            .attr("class", "bar2")
            .attr("x", function (d) {
                return x(d.x)+10;
            })
            .attr("y", function (d) {
                return y0(d.y + d.y0);
            })
            .attr("height", function (d) {
                return y0(d.y0) - y0(d.y + d.y0);
            })
            .attr("width", x.rangeBand()-20)
            .on("mouseover", function() { tooltip1.style("display", null); })
            .on("mouseout", function() { tooltip1.style("display", "none"); })
            .on("mousemove", function(d) {
              var xPosition = d3.mouse(this)[0] - 15;
              var yPosition = d3.mouse(this)[1] - 25;
              tooltip1.attr("transform", "translate(" + xPosition + "," + yPosition + ")");
              tooltip1.select("text").text(d.y);
  });

// // Prep the tooltip bits, initial display is hidden
  var tooltip1 = svg1.append("g")
    .attr("class", "tooltip")
    .style("display", "none");
  createToolTip(tooltip1,svg1);
//   tooltip.append("rect")
//     .attr("width", 30)
//     .attr("height", 20)
//     .attr("fill", "white")
//     .style("opacity", 0.5);
//   tooltip.append("text")
//     .attr("x", 15)
//     .attr("dy", "1.2em")
//     .style("text-anchor", "middle")
//     .attr("font-size", "12px")
//     .attr("font-weight", "bold");
/*========================  function create tool tip==============================*/
function createToolTip (tooltip,svg) {
  // body... 
  tooltip.append("rect")
    .attr("width", 30)
    .attr("height", 20)
    .attr("fill", "white")
    .style("opacity", 0.5);
  tooltip.append("text")
    .attr("x", 15)
    .attr("dy", "1.2em")
    .style("text-anchor", "middle")
    .attr("font-size", "12px")
    .attr("font-weight", "bold");
}
</script>
</body>
</html>